<div class="container">


  <mat-card class="my-5">

    <div class="container">
      <div class="row">
        <div class="col-xs-12 col-sm-6 col-md-6 col-lg-3"><button mat-raised-button class="colorBtn w-100 zoom"
            (click)="enviarTablaSesiones()">Reporte
            PAT</button></div>
        <div class="col-xs-12 col-sm-6 col-md-6 col-lg-3"><button mat-raised-button class="colorBtn w-100 zoom"
            (click)="btnRIAT()">Informe
            asistencias</button></div>
        <div class="col-xs-12 col-sm-6 col-md-6 col-lg-3"><button mat-raised-button class="colorBtn w-100 zoom"
            (click)="btnReac()">Reporte REAC</button>
          </div>
        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-3">
          <mat-form-field color="accent">
            <mat-label>Filter</mat-label>
            <input matInput (keyup)="applyFilter($event)" placeholder="Ex. Sesion" #input>
          </mat-form-field>
        </div>
      </div>
    </div>

    <div class="mat-elevation-z8 .div-table overflow-auto">
      <table mat-table [dataSource]="dataSource" matSort>

        <!-- ID Column -->
        <ng-container matColumnDef="numSesion">
          <th mat-header-cell *matHeaderCellDef mat-sort-header (click)="IniciarPaginador()"> No. Sesion </th>
          <td mat-cell *matCellDef="let sesion"> {{sesion.numSesion}} </td>
        </ng-container>

        <!-- Progress Column -->
        <ng-container matColumnDef="tema">
          <th mat-header-cell *matHeaderCellDef> Tema </th>
          <td mat-cell *matCellDef="let sesion"> {{sesion.tema}} </td>
        </ng-container>

        <!-- Name Column -->
        <ng-container matColumnDef="modalidad">
          <th mat-header-cell *matHeaderCellDef> Modalidad </th>
          <td mat-cell *matCellDef="let sesion"> {{sesion.modalidad}} </td>
        </ng-container>

        <!-- Color Column -->
        <ng-container matColumnDef="fecha" class="overflow-auto">
          <th mat-header-cell *matHeaderCellDef> Date </th>
          <td mat-cell *matCellDef="let sesion"> {{sesion.createAt | date:'fullDate'}} </td>
        </ng-container>

        <ng-container matColumnDef="asistencias">
          <th mat-header-cell *matHeaderCellDef> Asistencias</th>
          <td mat-cell *matCellDef="let sesion" class="p-1">
            <button mat-mini-fab (click)="mostrarAsistencias(sesion)"
              class="colorBtn">({{sesion?.asistencias.length}})</button>
          </td>
        </ng-container>

        <ng-container matColumnDef="asignar">
          <th mat-header-cell *matHeaderCellDef> Asignar asistencias </th>
          <td mat-cell *matCellDef="let sesion" class="p-1">
            <div class="container-fluid" *ngIf="docente?.alumnos.length > 0">
              <button mat-mini-fab (click)="asignarAlumnos(sesion)" class="colorBtn"
                [disabled]="sesion?.asistencias.length > 0">
                <mat-icon>create</mat-icon>
              </button>
            </div>
          </td>
        </ng-container>

        <ng-container matColumnDef="editar">
          <th mat-header-cell *matHeaderCellDef> Editar </th>
          <td mat-cell *matCellDef="let sesion" class="p-1">
            <button mat-mini-fab [routerLink]="['/sesiones/form',sesion.id]" class="colorBtn">
              <mat-icon>create</mat-icon>
            </button>
          </td>
        </ng-container>

        <ng-container matColumnDef="eliminar">
          <th mat-header-cell *matHeaderCellDef> Eliminar </th>
          <td mat-cell *matCellDef="let sesion" class="p-1">
            <button mat-mini-fab (click)="eliminar(sesion)" color="warn">
              <mat-icon>delete</mat-icon>
            </button>
          </td>
        </ng-container>


        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

        <!-- Row shown when there is no matching data. -->
        <tr class="mat-row" *matNoDataRow>
          <td class="mat-cell" colspan="4">Sin datos para mostrar</td>
        </tr>
      </table>

      <mat-paginator [pageSizeOptions]="[3,4,5, 10, 25, 100]"></mat-paginator>
    </div>
  </mat-card>




  <div class="container table-responsive" *ngIf="alumnos?.length > 0">
    <table class="table table-hover border border-primary align-middle w-100"
      style="background: rgba(255, 255, 255, 0.623);">
      <thead class="thead-light">
        <tr>
          <th>Matricula</th>
          <th>Nombre</th>
          <th>apellido</th>
          <th>Semestre</th>
          <th>asistencia total</th>
          <th>Calcular asistencia total</th>
          <th>Detalles</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let alumno of alumnos" class="fw-bold mat-elevation-z8 align-middle">
          <td>{{alumno.matricula}}</td>
          <td>{{alumno.nombre}}</td>
          <td>{{alumno.apellido}}</td>
          <td>{{alumno.semestre}}</td>
          <td>{{alumno.promAsistencia}}</td>
          <td>
            <div class="container" style="text-align: center;">
              <button mat-mini-fab (click)="asistenciasAlumno(alumno)" class="colorBtn">
                <mat-icon>create</mat-icon>
              </button>
            </div>
          </td>
          <td>
            <button mat-mini-fab class="colorBtn" [routerLink]="['/alumnos/form',alumno.id]"
              routerLinkActive="router-link-active">
              <mat-icon>visibility</mat-icon>
            </button></td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
