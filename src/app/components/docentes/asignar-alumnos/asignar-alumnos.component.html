<mat-card>
  <mat-card-header *ngIf="docente">
    <mat-card-title>
      Alumno del docente {{docente.nombre}}
    </mat-card-title>
  </mat-card-header>

  <mat-card-content>
    <mat-tab-group dynamicHeight [(selectedIndex)]="tabIndex">
      <mat-tab label="Asignar alumnos">

        <mat-form-field class="mx-3" style="width: 350px;max-width: 50%;">
          <mat-label>Nombre o apellido</mat-label>
          <input matInput placeholder="Buscar alumnos" (keyup)="filtrar($event.target.value)" [(ngModel)]="filtro">
        </mat-form-field>

        <mat-form-field class="mx-3" style="width: 350px;max-width: 50%;">
          <mat-label>Seleccionar por Matricula</mat-label>
          <input matInput placeholder="Buscar alumnos" (keyup)="filtrarMatricula($event.target.value)" [(ngModel)]="filtro">
        </mat-form-field>

        <div class="container example-container">
          <table mat-table [dataSource]="alumnosAsignar" class="mat-elevation-z8 mx-3">

            <ng-container matColumnDef="seleccion" >
              <th mat-header-cell *matHeaderCellDef>
                <mat-checkbox (change)="$event? seleccionarDesSeleccionarTodos():null"
                  [checked]="seleccion.hasValue() && estanTodosSeleccionados()"
                  [indeterminate]="seleccion.hasValue() && !estanTodosSeleccionados()">

                </mat-checkbox>
              </th>
              <td mat-cell *matCellDef="let alumno">
                <mat-checkbox (click)="$event.stopPropagation()" (change)="$event? seleccion.toggle(alumno):null"
                  [checked]="seleccion.isSelected(alumno)">

                </mat-checkbox>
              </td>
            </ng-container>
            <!-- nombre Column -->
            <ng-container matColumnDef="nombre">
              <th mat-header-cell *matHeaderCellDef> Nombre </th>
              <td mat-cell *matCellDef="let alumno"> {{alumno.nombre}} </td>
            </ng-container>

            <!-- apellido Column -->
            <ng-container matColumnDef="apellido">
              <th mat-header-cell *matHeaderCellDef> apellido </th>
              <td mat-cell *matCellDef="let alumno"> {{alumno.apellido}} </td>
            </ng-container>

            <!-- carrera Column -->
            <ng-container matColumnDef="carrera">
              <th mat-header-cell *matHeaderCellDef> Carrera </th>
              <td mat-cell *matCellDef="let alumno"> {{alumno.carrera}} </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="mostrarColumnas"></tr>
            <tr mat-row *matRowDef="let alumno; columns: mostrarColumnas;" (click)="seleccion.toggle(alumno)">
            </tr>
          </table>
        </div>
        <button mat-raised-button color="primary" class="m-4" (click)="asignar()"
          [disabled]="!seleccion.hasValue()">Asignar</button>
      </mat-tab>

      <mat-tab label="Alumnos">
        <div class="container example-container">
          <table mat-table [dataSource]="dataSource" class="mat-elevation-z8 mx-3" id="alumnosTable">

            <ng-container matColumnDef="id" >
              <th mat-header-cell *matHeaderCellDef> Matricula</th>
              <td mat-cell *matCellDef="let alumno"> {{alumno.matricula}} </td>
            </ng-container>

            <ng-container matColumnDef="nombre">
              <th mat-header-cell *matHeaderCellDef> Nombre </th>
              <td mat-cell *matCellDef="let alumno"> {{alumno.nombre}} </td>
            </ng-container>

            <!-- apellido Column -->
            <ng-container matColumnDef="apellido">
              <th mat-header-cell *matHeaderCellDef> apellido </th>
              <td mat-cell *matCellDef="let alumno"> {{alumno.apellido}} </td>
            </ng-container>

            <!-- Correo Column -->
            <ng-container matColumnDef="correo">
              <th mat-header-cell *matHeaderCellDef> Correo </th>
              <td mat-cell *matCellDef="let alumno"> {{alumno.correo}} </td>
            </ng-container>

            <ng-container matColumnDef="carrera">
              <th mat-header-cell *matHeaderCellDef> Carrera </th>
              <td mat-cell *matCellDef="let alumno"> {{alumno.carrera}} </td>
            </ng-container>

            <ng-container matColumnDef="semestre">
              <th mat-header-cell *matHeaderCellDef> Semestre </th>
              <td mat-cell *matCellDef="let alumno"> {{alumno.semestre}} </td>
            </ng-container>

            <ng-container matColumnDef="detalles" >
              <th mat-header-cell *matHeaderCellDef>Detalles</th>
              <td mat-cell *matCellDef="let alumno">
                <button mat-mini-fab color="accent" [routerLink]="['/alumnos/form/',alumno.id]">
                    <mat-icon>create</mat-icon>
                </button>
              </td>
            </ng-container>

            <ng-container matColumnDef="eliminar" >
              <th mat-header-cell *matHeaderCellDef>Eliminar</th>
              <td mat-cell *matCellDef="let alumno">
                <button mat-mini-fab color="warn" (click)="eliminarAlumno(alumno)">x</button>
              </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="mostrarColumnasAlumnos"></tr>
            <tr mat-row *matRowDef="let alumno; columns: mostrarColumnasAlumnos;">
            </tr>
          </table>          
        </div>
        <button mat-raised-button (click)="exportexcel()" color="accent">Exportar Excel</button>
        <mat-paginator [pageSizeOptions]="pageSizeOptions" showFirstLastButtons class="float-left mx-2">
        </mat-paginator>
      </mat-tab>
    </mat-tab-group>

  </mat-card-content>
</mat-card>
